package epsilongreedy



import "testing"
import "math/rand"



func TestExploit(t *testing.T) {

	for i:=0; i<100; i++ {

		size := 1+uint64(rand.Int63n(1000))

		// rand.Float64() returns [0,1)
		epsilon := rand.Float64()
		
		x := New(size, epsilon)

		if nil == x {
			t.Errorf("Expected a non-nil return for size [%+v] and epsilon [%v]", size, epsilon)
		}

		if epsilon != x.epsilon {
			t.Errorf("Stored epsilon and test epsilon are different for size [%+v] and epsilon [%+v] and object [%+v]", size, epsilon, x)
		}


		indexForMax := uint64(rand.Int63n(int64(size)))

		x.indexForMax = indexForMax


		index := x.exploit()

		if 0 > index || size <= index {
			t.Errorf("Selected index is not the expected range for size [%+v] and epsilon [%+v] and object [%+v]", size, epsilon, x)
		}

		if indexForMax != index {
			t.Errorf("The returned index for exploiting [%+v] is not the same as what was set for the internal \"indexForMax\"", index, indexForMax)
		}

	}

}
